<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" type="text/css" href="../node_modules/survey-core/survey-core.css" />
  <link rel="stylesheet" type="text/css" href="../node_modules/survey-creator-core/survey-creator-core.css" />
  <link rel="stylesheet" type="text/css" href="../node_modules/survey-creator-core/ui-preset-editor/index.css">
  <!-- <link rel="stylesheet" type="text/css" href="../build/survey-creator-js.min.css" /> -->
  <style>
        /*imitation of Tailwind CSS, bootstrap and other CSS frameworks (only for survey-creator-js)*/
        *,
        ::after,
        ::before {
            box-sizing: border-box;
        }
  </style>
  <script src="../node_modules/survey-core/survey.core.js"></script>
  <script src="../node_modules/survey-core/survey.i18n.js"></script>
  <script src="../node_modules/survey-core/themes/index.js"></script>
  <script src="../node_modules/survey-creator-core/survey-creator-core.js"></script>
  <script src="../node_modules/survey-creator-core/survey-creator-core.i18n.js"></script>
  <script src="../node_modules/survey-creator-core/ui-preset-editor/index.js"></script>
  <script src="../node_modules/survey-creator-core/ui-presets/index.js"></script>
  <script src="../node_modules/survey-js-ui/survey-js-ui.js"></script>
  <script src="../build/survey-creator-js.js"></script>
  <script src="../build/ui-preset-editor/index.js"></script>
  <script src="./sc.js"></script>
  <script src="../node_modules/survey-creator-core/themes/test.js"></script>
</head>

<body spellcheck="false">
  <div id="survey-creator"></div>
</body>
<script>
  window.addEventListener("DOMContentLoaded", () => {
    window.surveyJSFramework = "react";
    SurveyCreatorCore.registerSurveyTheme(SurveyTheme);
    SurveyCreatorCore.registerCreatorTheme(SurveyCreatorTheme.Test);
    SurveyCreatorCore.registerUIPreset(SurveyCreatorUIPreset);
    const creator = new SurveyCreator.SurveyCreator({ expandCollapseButtonVisibility: "never", showLogicTab: true, showTranslationTab: true, showJSONEditorTab: false });
    creator.applyCreatorTheme(SurveyCreatorTheme.Test);
    creator.tabResponsivenessMode = "menu";
    creator["animationEnabled"] = false;
    window["Survey"].settings.animationEnabled = false;
    creator.allowZoom = false;
    window.creator = creator;
    new SurveyCreatorUIPresetEditorCore.UIPresetEditor(creator);

    class SurveyCreatorRenderComponent extends SurveyUI.Component {
      constructor(props) {
        super(props);
        this.state = { creator: creator };
        window.updateCreatorModel = (options, json) => {
          window.prevCreator = window.creator;
          const creator = new SurveyCreator.SurveyCreator(options);
          creator.applyCreatorTheme(SurveyCreatorTheme.Test);
          creator.JSON = json;
          this.setState({ creator });
          creator.tabResponsivenessMode = "menu";
          creator["animationEnabled"] = false;
          creator.allowZoom = false;
          window.creator = creator;
          new SurveyCreatorUIPresetEditorCore.UIPresetEditor(creator);
        }
      }
      render() {
        return SurveyUI.createElement(SurveyCreator.SurveyCreatorComponent, { creator: this.state.creator });
      }
    }
    // SurveyCreator.renderSurveyCreator(creator, document.getElementById("survey-creator"));
    const survey = SurveyUI.createElement(SurveyCreatorRenderComponent, { creator });

    const container = document.getElementById("survey-creator");
    const shadowRoot = container.attachShadow({ mode: "open" });
    const rootElement = document.createElement("div");
    rootElement.style.position = "fixed";
    rootElement.style.top = "0";
    rootElement.style.left = "0";
    rootElement.style.right = "0";
    rootElement.style.bottom = "0";
    

    const styles = document.createElement("style");
          styles.textContent = `
            *,
            ::after,
            ::before {
                box-sizing: border-box;
            }
          `;
    shadowRoot.appendChild(styles);

    const surveyLink = document.createElement("link");
    surveyLink.setAttribute("rel", "stylesheet");
    surveyLink.setAttribute("href", "../node_modules/survey-core/survey-core.min.css");
    shadowRoot.appendChild(surveyLink);

    const creatorLink = document.createElement("link");
    creatorLink.setAttribute("rel", "stylesheet");
    creatorLink.setAttribute("href", "../node_modules/survey-creator-core/survey-creator-core.min.css");
    shadowRoot.appendChild(creatorLink);

    const presetEditorLink = document.createElement("link");
    presetEditorLink.setAttribute("rel", "stylesheet");
    presetEditorLink.setAttribute("href", "../node_modules/survey-creator-core/ui-preset-editor/index.css");
    shadowRoot.appendChild(presetEditorLink);

    shadowRoot.appendChild(rootElement);

    SurveyUI.render(survey, rootElement);
  })
</script>

</html>