<div class="svc-toolbox" data-bind="css: { 'svc-toolbox--compact': $data.toolbox.isCompact }, event:{ scroll: function(model, event) { $data.toolbox.onScroll(model, event); return true; } }">
  <div class="svc-toolbox__container">
    <!-- ko ifnot: $data.toolbox.isCompact || categories().length == 1 || !$data.toolbox.showCategoryTitles -->
    <!-- ko foreach: categories -->
    <div class="svc-toolbox__category" data-bind="css: { 'svc-toolbox__category--collapsed': $data.collapsed }">
      <!-- ko if: $parent.categories().length > 1 -->
      <div class="svc-toolbox__category-header"
        data-bind="click: toggleState, key2click, css: { 'svc-toolbox__category-header--collapsed': $data.toolbox.canCollapseCategories }">
        <span class="svc-toolbox__category-title" data-bind="text: name"></span>
        <!-- ko if: $data.toolbox.canCollapseCategories -->
        <div class="svc-toolbox__category-header__controls">
          <sv-svg-icon class="svc-toolbox__category-header__button svc-string-editor__button--expand"
            data-bind="visible: collapsed" params="iconName: 'icon-arrow-down', size: 24"></sv-svg-icon>
          <sv-svg-icon class="svc-toolbox__category-header__button svc-string-editor__button--collapse"
            data-bind="visible: !collapsed" params="iconName: 'icon-arrow-up', size: 24"></sv-svg-icon>
        </div>
        <!-- /ko -->
      </div>
      <!-- /ko -->
      <!-- ko foreach: items -->
      <!-- ko component: { name: $data.component || 'svc-toolbox-tool', params: { item: $data, creator: $parents[1].creator, model: $parent.toolbox, isCompact: false } } -->
      <!-- /ko -->
      <!-- /ko -->
    </div>
    <!-- /ko -->
    <!-- /ko -->

    <!-- ko if: $data.toolbox.isCompact || categories().length == 1 || !$data.toolbox.showCategoryTitles -->
    <div class="svc-toolbox__category">
      <!-- ko foreach: $data.toolbox.renderedActions -->
      <!-- ko if: $data.needSeparator && !$parent.toolbox.showCategoryTitles-->
      <div class="svc-toolbox__category-separator"></div>
      <!-- /ko -->
      <!-- ko component: { name: 'svc-toolbox-tool', params: { item: $data, creator: $parent.creator, model: $parent.toolbox, isCompact: $parent.toolbox.isCompact } } -->
      <!-- /ko -->
      <!-- /ko -->
    </div>
    <!-- /ko -->
  </div>
</div>